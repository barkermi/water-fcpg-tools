from tools import *



paramRast = "../data/cov/source_var_dd_mm_yyyy.tif"
taufdr = "../data/tauDEM/taufdr1002" #Name must be in format taufdrXXXX.tif, where XXXX is a HUC code of any length
taufac = "../data/tauDEM/taufac1002"
workDir = "../work/1002"
outDir = "../CPGs/1002"

#Set up Inputs
paramRast = sys.argv[0] #Path to parameter raster with name in format of "source_var_dd_mm_yyyy.tif"
taufdr = sys.argv[1] #Path to tauDEM flow direction grid with in format of "taufdrXXXX.tif", where XXXX is a HUC code of any length
taufac = sys.argv[2] #Path to tauDEM flow accumulation grid
workDir = sys.argv[3] #Path to working directory
outDir = sys.argv[4] #Path to output directory for CPG files
cores = sys.argv[5] #Number of cores to use 


#Get name of input parameter without extention
paramName = os.path.splitext(os.path.basename(param))[0] 

#Get HUC number from tau flow direction raster name
try:
        HUC = os.path.splitext(os.path.basename(param))[0].split("taufdr")[0]
except:
        print("Error - Flow direction raster has inappropriate name")


rprjFile = os.path.join(workDir, paramName + "rprj.tif") #Create filepath for reprojected parameter file
accumFile = os.path.join(workDir, paramName + "accum.tif") #Create filepath for accumulated parameter file
CPGFile = os.path.join(outDir, paramName + "_HUC" + HUC +"_CPG.tif") #Create filepath for parameter CPG file


resampleParam(cov, taufdr, rprjPRISM, resampleMethod="bilinear", cores=cores) #Resample and reprojected parameter raster
accumulateParam(rprjPRISM, taufdr, accumPRISM, outNoDataRast=PRISMnodata, outNoDataAccum=PRISMnodataaccum, cores=cores) #Accumulate parameter
make_cpg(accumPRISM, taufac, PRISMCPG, noDataRast=PRISMnodata, minAccum=100) #Create parameter CPG

