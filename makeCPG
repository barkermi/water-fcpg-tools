from tools import *



paramRast = "../data/cov/source_var_dd_mm_yyyy.tif"
taufdr = "../data/tauDEM/taufdr1002" #Name must be in format taufdrXXXX.tif, where XXXX is a HUC code of any length
taufac = "../data/tauDEM/taufac1002"
workDir = "../work/1002"
outDir = "../CPGs/1002"


cores = 16 

paramName = os.path.splitext(os.path.basename(param))[0] #Get name of input parameter without extention

#Get HUC number from tau flow direction raster name
try:
        HUC = os.path.splitext(os.path.basename(param))[0].split("taufdr")[0]
except:
        print("Error - Flow direction raster has inappropriate name")

resampledList = resampleParams(covList, taufdr, workDir, resampleMethod="bilinear", cores=cores, appStr="rprj")
accumulatedList = accumulateParams(resampledList, taufdr, workDir, cores=cores, appStr="accum")
CPGList = make_cpgs(accumulatedList, taufac, outDir, minAccum=100, appStr="CPG")


rprjFile = os.path.join(workDir, paramName + "rprj.tif")
accumFile = os.path.join(workDir, paramName + "accum.tif")
CPGFile = os.path.join(outDir, paramName + "_HUC" + HUC +"_CPG.tif")
resampleParam(cov, taufdr, rprjPRISM, resampleMethod="bilinear", cores=cores)
accumulateParam(rprjPRISM, taufdr, accumPRISM, outNoDataRast=PRISMnodata, outNoDataAccum=PRISMnodataaccum, cores=cores)
make_cpg(accumPRISM, taufac, PRISMCPG, noDataRast=PRISMnodata, minAccum=100)

