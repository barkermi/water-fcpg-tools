

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Flow-Conditioned Parameter Grid Tools 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> Flow-Conditioned Parameter Grid Tools
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-cookbook">Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#input-data">Input Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-functions">Function Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-z_references">References</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Flow-Conditioned Parameter Grid Tools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Flow-Conditioned Parameter Grid Tools 1.0.0 documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="welcome-to-flow-conditioned-parameter-grid-tools-documentation">
<h1>Welcome to Flow-Conditioned Parameter Grid Tools’ documentation!<a class="headerlink" href="#welcome-to-flow-conditioned-parameter-grid-tools-documentation" title="Permalink to this headline">¶</a></h1>
<p>The Flow-Conditioned Parameter Grid (FCPG) Tools are a Python 3 library to make FCPGs for either two-digit Hydrologic Unit Code (HUC2) regions, four-digit Hydrologic Unit Code (HUC4) regions, or other geospatial tiling schemes. These tools can be used in a Linux-based high performance computing (HPC) environment or locally on your system.</p>
<div class="figure align-default" id="id2">
<a class="reference internal image-reference" href="_images/CPG_tool_structure.png"><img alt="Conceptual FCPG process flowchart." src="_images/CPG_tool_structure.png" style="width: 640.0px; height: 360.0px;" /></a>
<p class="caption"><span class="caption-text">Flowchart of FCPG processing work flow.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>Clone the repository using <code class="code docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://code.usgs.gov/StreamStats/FCPGtools.git</span></code>.</p>
<p>Then change directories, using <code class="code docutils literal notranslate"><span class="pre">cd</span></code>, into the repository and create an Anaconda environment using the supplied <code class="code docutils literal notranslate"><span class="pre">FCPGtools_env.yml</span></code> file by calling <code class="code docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-f</span> <span class="pre">FCPGtools_env.yml</span></code>. Activate the FCPG environment using the instructions printed by conda after the environment is created successfully.</p>
<p>Then, install the repository using <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+file:&lt;Full</span> <span class="pre">Path</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">FCPGtools</span> <span class="pre">repository&gt;</span></code></p>
<p>For example, <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+file:/home/&lt;username&gt;/projects/FCPGtools</span></code></p>
<p>On a HPC system you may need to load the correct Python module before building the Anaconda environment. This might be done with <code class="code docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">python/anaconda3</span></code>.</p>
</div>
<div class="section" id="dependencies">
<h1>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h1>
<p>Dependencies for this work are largely taken care of via the Anaconda environment specified by the yml file; however, the tools do rely on <a class="reference external" href="https://github.com/dtarb/TauDEM/tree/v5.3.8">TauDEM 5.3.8</a> <a class="bibtex reference internal" href="index.html#taudem" id="id1">[1]</a>, which needs to be installed and visible to your conda environment.</p>
<p>This library works best with GeoTiff files; however, other GDAL-compatible geospatial raster format could also potentially be used.</p>
</div>
<div class="section" id="quick-start">
<h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p>Load the FCPGtools using <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">FCPGtools</span> <span class="pre">as</span> <span class="pre">fcpg</span></code>.</p>
<p>Please refer to the <a class="reference internal" href="index.html#cookbook-label"><span class="std std-ref">Cookbook</span></a> and <a class="reference internal" href="index.html#function-label"><span class="std std-ref">Function Documentation</span></a> for examples and usage.</p>
</div>
<div class="section" id="citation">
<h1>Citation<a class="headerlink" href="#citation" title="Permalink to this headline">¶</a></h1>
<p>Barnhart, T.B., Sando, R., Siefken, S.A., McCarthy, P.M., and Rea, A.H., 2020, Flow-Conditioned Parameter Grid Tools: U.S. Geological Survey Software Release, DOI: <a class="reference external" href="https://doi.org/10.5066/P9FPZUI0">https://doi.org/10.5066/P9FPZUI0</a></p>
</div>
<div class="section" id="disclaimers">
<h1>Disclaimers<a class="headerlink" href="#disclaimers" title="Permalink to this headline">¶</a></h1>
<p>Any use of trade, firm, or product names is for descriptive purposes only and does not imply endorsement by the U.S. Government.</p>
<p>This software has been approved for release by the U.S. Geological Survey (USGS). Although the software has been subjected to rigorous review, the USGS reserves the right to update the software as needed pursuant to further analysis and review. No warranty, expressed or implied, is made by the USGS or the U.S. Government as to the functionality of the software and related material nor shall the fact of release constitute any such warranty. Furthermore, the software is released on condition that neither the USGS nor the U.S. Government shall be held liable for any damages resulting from its authorized or unauthorized use.</p>
</div>
<div class="section" id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h1>
<p>This work is published with the MIT Open Source License:</p>
<p>Copyright 2020 Theodore Barnhart, Roy Sando, Seth Siefken, Peter McCarthy, and Alan Rea (U.S. Geological Survey)</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<div class="toctree-wrapper compound">
<span id="document-cookbook"></span><div class="section" id="cookbook">
<span id="cookbook-label"></span><h2>Cookbook<a class="headerlink" href="#cookbook" title="Permalink to this headline">¶</a></h2>
<p>Example scripts and work flows for common FCPG tasks on local workstations and HPC environments. These scripts have not been turned into FCPGtools functions because of the variability in HPC, local systems, and input data sets that the FCPGtools may be used with.</p>
<div class="section" id="input-data">
<h3>Input Data<a class="headerlink" href="#input-data" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>To produce a basic FCPG you will need the following data for the same geographic area:</dt><dd><ul class="simple">
<li><p>Flow direction grid, ideally with TauDEM flow directions. Other flow direction formats (e.g. ESRI) can be reclassified to TauDEM flow directions.</p></li>
<li><p>Parameter grid, a precipitation or air temperature grid is likely easiest, the resolution does not need to match your flow direction grid; however, the extent must be at least that of the flow direction grid.</p></li>
</ul>
</dd>
<dt>To produce more complex FCPGs from categorical data or that cascade from one upstream hydrologic tile to a downstream tile you will need more data:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>A categorical parameter grid (e.g. land cover).</dt><dd><ul>
<li><p>The Watershed Boundary Dataset for the area you are working in. This helps the tools locate areas within geospatial tiles that flow out of the tile and into the next downstream tile.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<div class="toctree-wrapper compound">
<span id="document-make_TauDEM_files"></span><div class="section" id="generate-taudem-files-from-an-esri-flow-direction-grid">
<h4>Generate TauDEM Files From An ESRI Flow Direction Grid<a class="headerlink" href="#generate-taudem-files-from-an-esri-flow-direction-grid" title="Permalink to this headline">¶</a></h4>
<p>Helper script to reclassify an ESRI flow direction grid to TauDEM flow directions and generate a TauDEM flow accumulation grid.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fcpgtools</span> <span class="kn">as</span> <span class="nn">fcpg</span>

<span class="n">cores</span> <span class="o">=</span> <span class="mi">6</span> <span class="c1"># Computer cores to use.</span>
<span class="n">fdr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Input ESRI flow direction grid.</span>
<span class="n">fdrTau</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Output TauDEM formatted flow direction grid.</span>
<span class="n">facTau</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Output flow accumulation grid.</span>
    
<span class="n">fcpg</span><span class="o">.</span><span class="n">tauDrainDir</span><span class="p">(</span><span class="n">fdr</span><span class="p">,</span> <span class="n">taufdr</span><span class="p">)</span> <span class="c1"># Reclassify flow directions.</span>
<span class="n">fcpg</span><span class="o">.</span><span class="n">tauFlowAccum</span><span class="p">(</span><span class="n">taufdr</span><span class="p">,</span> <span class="n">taufac</span><span class="p">,</span> <span class="n">cores</span><span class="o">=</span><span class="n">cores</span><span class="p">)</span> <span class="c1"># Compute flow accumulation.</span>
</pre></div>
</td></tr></table></div>
</div>
<span id="document-batch_fcpgs_hpc"></span><div class="section" id="batch-fcpg-creation-on-an-hpc">
<h4>Batch FCPG Creation on an HPC<a class="headerlink" href="#batch-fcpg-creation-on-an-hpc" title="Permalink to this headline">¶</a></h4>
<p>This is an example of batch creating FCPG grids from a folder of parameter (precipitation, air temperature, land cover, etc.) grids and a flow direction grid. This example uses two Python scripts. The first script sorts through the parameter grids and submits a Slurm job for each one and the second script, <code class="code docutils literal notranslate"><span class="pre">makeFCPG.py</span></code>, creates the FCPG within the Slurm job. For more information on the Slurm workload manager, see <a class="reference external" href="https://slurm.schedmd.com/overview.html">https://slurm.schedmd.com/overview.html</a>.</p>
<div class="section" id="parse-parameter-grids-and-submit-slurm-jobs">
<h5>Parse parameter grids and submit SLURM jobs<a class="headerlink" href="#parse-parameter-grids-and-submit-slurm-jobs" title="Permalink to this headline">¶</a></h5>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">hpcAccount</span> <span class="o">=</span> <span class="s1">&#39;your_hpc_account_here&#39;</span>

<span class="c1">## The following lines indicate the order of the command line arguments that need to be supplied to this script.</span>

<span class="c1"># Check if system arguments were provided</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">inDir</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># Input directory in which to search for parameter rasters</span>
    <span class="n">taufdr</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># Flow direction grid in tauDEM format</span>
    <span class="n">taufac</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="c1"># Flow accumulation grid in tauDEM format</span>
    <span class="n">workDir</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="c1"># Working directory to save intermediate files</span>
    <span class="n">outDir</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="c1"># Output directory to save CPGs</span>
    <span class="n">logDir</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="c1"># Directory to save slurm log files</span>
    <span class="n">cores</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="c1"># Number of cores to use for each slurm job</span>
    <span class="n">accumThresh</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="c1"># Number of cells in flow accumulation grid below which CPG will be set to no data</span>
    <span class="n">overwrite</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="c1"># Whether to overwrite existing CPGs</span>
    <span class="n">deleteTemp</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="c1"># Whether to delete temporary files</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="c1"># Email address to send updates to</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;No arguments provided.&#39;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">covList</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#Initialize list of parameter grids</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">inDir</span><span class="p">):</span>
    <span class="c1">#Get all parameter grid files in directory</span>
    <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">subdirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">inDir</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="c1">#Check if file is .tif, and if so add it to parameter list</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">name</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;.tif&quot;</span><span class="p">:</span>
                    <span class="n">covList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
<span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">inDir</span><span class="p">):</span>
    <span class="c1">#Supplied path is a single parameter grid file</span>
    <span class="n">covList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inDir</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Invalid parameter grid directory&quot;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;The following parameter grids were located:&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="o">*</span><span class="n">covList</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">cov</span> <span class="ow">in</span> <span class="n">covList</span><span class="p">:</span> <span class="c1">#Iterate through the parameter grids</span>

    <span class="n">covname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">cov</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">#Get the name of the parameter</span>

    <span class="c1">#Create batch job which runs python script</span>
    <span class="n">jobfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">workDir</span><span class="p">,</span> <span class="s2">&quot;{0}.slurm&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">covname</span><span class="p">)))</span> <span class="c1"># Create path to slurm job file</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jobfile</span><span class="p">,</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        
        <span class="c1">#Write slurm job details</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#!/bin/bash</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH --job-name={0}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">covname</span><span class="p">))</span> <span class="c1"># set the name of the job</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH -c 1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># cpus per task</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH -n {0}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cores</span><span class="p">))</span> <span class="c1"># number of tasks</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH --tasks-per-node=20</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># Set number of tasks per node</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH -o {0}/slurm-%A.out</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">logDir</span><span class="p">))</span> <span class="c1"># Set log file name </span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH -p normal</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># the partition you want to use, for this case prod is best</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH --account={0}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hpcAccount</span><span class="p">))</span> <span class="c1"># your account</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH --time=01:00:00</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># Overestimated guess at time</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH --mem=128000</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1">#memory in MB</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH --mail-type=ALL</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># Send email only for all events</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH --mail-user={0}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">email</span><span class="p">))</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;#SBATCH --exclusive</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># Require exclusive use of nodes</span>

        <span class="c1">#Set up python environment for job</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;module load taudem/5.3.8</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># load TauDEM</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;source activate FCPGtools</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># activate the correct Python environment, you will need to build this using Anaconda.</span>

        <span class="c1">#Run the Python script</span>
        <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="s2">&quot;python -u ./makeFCPG.py {0} {1} {2} {3} {4} {5} {6} {7} {8}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cov</span><span class="p">,</span> <span class="n">taufdr</span><span class="p">,</span> <span class="n">taufac</span><span class="p">,</span> <span class="n">workDir</span><span class="p">,</span> <span class="n">outDir</span><span class="p">,</span> <span class="n">cores</span><span class="p">,</span> <span class="n">accumThresh</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">,</span> <span class="n">deleteTemp</span><span class="p">))</span>
        
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Launching batch job for: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">covname</span><span class="p">))</span>

    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;sbatch {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jobfile</span><span class="p">))</span> <span class="c1">#Send command to console</span>

    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1">#Wait between submitting jobs</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="generate-a-fcpg-given-a-parameter-and-fdr-grid">
<h5>Generate a FCPG given a parameter and FDR grid<a class="headerlink" href="#generate-a-fcpg-given-a-parameter-and-fdr-grid" title="Permalink to this headline">¶</a></h5>
<p><code class="code docutils literal notranslate"><span class="pre">makeFCPG.py</span></code></p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">FCPGtools</span> <span class="kn">as</span> <span class="nn">fcpg</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Starting {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()))</span>

<span class="c1"># Set up Inputs</span>
<span class="n">paramRast</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># Path to parameter raster with name in format of &quot;source_var_dd_mm_yyyy.tif&quot;</span>
<span class="n">taufdr</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># Path to tauDEM flow direction grid with in format of &quot;taufdrXXXX.tif&quot;, where XXXX is a HUC code of any length</span>
<span class="n">taufac</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="c1"># Path to tauDEM flow accumulation grid</span>
<span class="n">workDir</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="c1"># Path to working directory</span>
<span class="n">outDir</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="c1"># Path to output directory for FCPG files</span>
<span class="n">cores</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span> <span class="c1"># Number of cores to use </span>
<span class="n">accumThresh</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span> <span class="c1"># Number of cells in flow accumulation grid below which FCPG will be set to no data</span>
<span class="n">overwrite</span> <span class="o">=</span> <span class="n">fcpg</span><span class="o">.</span><span class="n">parsebool</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span> <span class="c1"># Whether to overwrite CPGs or not </span>
<span class="n">deleteTemp</span> <span class="o">=</span> <span class="n">fcpg</span><span class="o">.</span><span class="n">parsebool</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span> <span class="c1"># Whether to delete temporary files</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Starting FCPG process for:&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Parameter Raster: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">paramRast</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Flow Driection Grid: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">taufdr</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Flow Accumulation Grid: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">taufac</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Working Directory: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">workDir</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Output Directory: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">outDir</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number of Cores: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cores</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Accumulation Threshold: {0} cells&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">accumThresh</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Overwrite Existing CPG: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">overwrite</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Delete Temporary Files: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">deleteTemp</span><span class="p">))</span>

<span class="c1">#Get name of input parameter without extention</span>
<span class="n">paramName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">paramRast</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> 

<span class="c1">#Get HUC number from tau flow direction raster name</span>
<span class="k">try</span><span class="p">:</span>
        <span class="n">HUC</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">taufdr</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;taufdr&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">except</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Error - Flow direction raster has inappropriate name&quot;</span><span class="p">)</span>

<span class="c1">#Prepare some file paths to things which will be created</span>
<span class="n">rprjFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">workDir</span><span class="p">,</span> <span class="n">paramName</span> <span class="o">+</span> <span class="s2">&quot;_HUC&quot;</span> <span class="o">+</span> <span class="n">HUC</span> <span class="o">+</span> <span class="s2">&quot;rprj.tif&quot;</span><span class="p">)</span> <span class="c1">#Create filepath for reprojected parameter file</span>
<span class="n">accumFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">workDir</span><span class="p">,</span> <span class="n">paramName</span> <span class="o">+</span> <span class="s2">&quot;_HUC&quot;</span> <span class="o">+</span> <span class="n">HUC</span> <span class="o">+</span> <span class="s2">&quot;accum.tif&quot;</span><span class="p">)</span> <span class="c1">#Create filepath for accumulated parameter file</span>
<span class="n">nodataFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">workDir</span><span class="p">,</span> <span class="n">paramName</span> <span class="o">+</span> <span class="s2">&quot;_HUC&quot;</span> <span class="o">+</span> <span class="n">HUC</span> <span class="o">+</span> <span class="s2">&quot;nodata.tif&quot;</span><span class="p">)</span> <span class="c1">#Create filepath for parameter no data file</span>
<span class="n">nodataaccumFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">workDir</span><span class="p">,</span> <span class="n">paramName</span> <span class="o">+</span> <span class="s2">&quot;_HUC&quot;</span> <span class="o">+</span> <span class="n">HUC</span> <span class="o">+</span> <span class="s2">&quot;accumnodata.tif&quot;</span><span class="p">)</span> <span class="c1">#Create filepath for parameter accumulated no data file</span>
<span class="n">zeronodataFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">workDir</span><span class="p">,</span> <span class="n">paramName</span> <span class="o">+</span> <span class="s2">&quot;_HUC&quot;</span> <span class="o">+</span> <span class="n">HUC</span> <span class="o">+</span> <span class="s2">&quot;zeronodata.tif&quot;</span><span class="p">)</span> <span class="c1">#Create filepath for parameter zeroed no data file</span>
<span class="n">CPGFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">outDir</span><span class="p">,</span> <span class="n">paramName</span> <span class="o">+</span> <span class="s2">&quot;_HUC&quot;</span> <span class="o">+</span> <span class="n">HUC</span> <span class="o">+</span><span class="s2">&quot;_FCPG.tif&quot;</span><span class="p">)</span> <span class="c1">#Create filepath for parameter FCPG file</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">CPGFile</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">overwrite</span> <span class="o">==</span> <span class="bp">False</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Error: Specified FCPG file exists and will not be overwritten&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
        <span class="c1">#Run the FCPG tools</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Calling resample function {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()))</span>
        <span class="n">fcpg</span><span class="o">.</span><span class="n">resampleParam</span><span class="p">(</span><span class="n">paramRast</span><span class="p">,</span> <span class="n">taufdr</span><span class="p">,</span> <span class="n">rprjFile</span><span class="p">,</span> <span class="n">resampleMethod</span><span class="o">=</span><span class="s2">&quot;bilinear&quot;</span><span class="p">,</span> <span class="n">cores</span><span class="o">=</span><span class="n">cores</span><span class="p">)</span> <span class="c1">#Resample and reprojected parameter raster</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Calling flow accumulation function {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()))</span>
        <span class="n">fcpg</span><span class="o">.</span><span class="n">accumulateParam</span><span class="p">(</span><span class="n">rprjFile</span><span class="p">,</span> <span class="n">taufdr</span><span class="p">,</span> <span class="n">accumFile</span><span class="p">,</span> <span class="n">outNoDataRast</span><span class="o">=</span><span class="n">nodataFile</span><span class="p">,</span> <span class="n">outNoDataAccum</span><span class="o">=</span><span class="n">nodataaccumFile</span><span class="p">,</span> <span class="n">zeroNoDataRast</span><span class="o">=</span><span class="n">zeronodataFile</span><span class="p">,</span> <span class="n">cores</span><span class="o">=</span><span class="n">cores</span><span class="p">)</span> <span class="c1">#Accumulate parameter</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Calling make_cpg function {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()))</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">nodataaccumFile</span><span class="p">):</span>
                <span class="c1">#If no data accumulation file was created, use it in call to create FCPG</span>
                <span class="n">fcpg</span><span class="o">.</span><span class="n">make_cpg</span><span class="p">(</span><span class="n">accumFile</span><span class="p">,</span> <span class="n">taufac</span><span class="p">,</span> <span class="n">CPGFile</span><span class="p">,</span> <span class="n">noDataRast</span><span class="o">=</span><span class="n">nodataaccumFile</span><span class="p">,</span> <span class="n">minAccum</span><span class="o">=</span><span class="n">accumThresh</span><span class="p">)</span> <span class="c1">#Create parameter FCPG with no data raster.</span>
        <span class="k">else</span><span class="p">:</span>
                <span class="n">fcpg</span><span class="o">.</span><span class="n">make_cpg</span><span class="p">(</span><span class="n">accumFile</span><span class="p">,</span> <span class="n">taufac</span><span class="p">,</span> <span class="n">CPGFile</span><span class="p">,</span>  <span class="n">minAccum</span><span class="o">=</span><span class="n">accumThresh</span><span class="p">)</span> <span class="c1">#Create parameter FCPG without no data raster.</span>
        
        <span class="k">if</span> <span class="n">deleteTemp</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                        <span class="c1">#Delete temporary files</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">rprjFile</span><span class="p">)</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">accumFile</span><span class="p">)</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">nodataFile</span><span class="p">)</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">nodataaccumFile</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Warning: Unable to delete temporary files&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Finished {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()))</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<span id="document-cascade_fcpg"></span><div class="section" id="cascade-fcpg-results-between-geospatial-tiles">
<h4>Cascade FCPG results between geospatial tiles<a class="headerlink" href="#cascade-fcpg-results-between-geospatial-tiles" title="Permalink to this headline">¶</a></h4>
<p>Watersheds or hydrologic units, e.g. the <a class="reference external" href="https://www.usgs.gov/core-science-systems/ngp/national-hydrography/watershed-boundary-dataset?qt-science_support_page_related_con=4#qt-science_support_page_related_con">Watershed Boundary Dataset</a>, are often used as geospatial tiling schemes for digital elevation models. These pose a challenge for FCPGs as downstream accumulated area and parameter grids must be corrected with values from upstream geospatial tiles to be accurate. This section contains examples for cascading flow between HUC4s and larger HUC2s or other geospatial tiling schemes.</p>
<div class="toctree-wrapper compound">
<span id="document-four_digit"></span><div class="section" id="cascade-four-digit-hydrologic-regions">
<h5>Cascade Four-Digit Hydrologic Regions<a class="headerlink" href="#cascade-four-digit-hydrologic-regions" title="Permalink to this headline">¶</a></h5>
<p>This script provides an example work flow of how to cascade the last (maximum) accumulated area values from an upstream basin, e.g. HUC 1002 – Upper Missouri, to the first cell of a downstream basin, e.g. HUC 1003 – Missouri-Marias. The process creates a json file containing the values to be cascaded, creates a weighting grid of ones for the downstream region, inserts the upstream value into the weighting grid at the correct location, and accumulates the weighting grid using the downstream flow direction grid to produce an adjusted flow accumulation grid for the downstream region. This process can be repeated for each parameter grid and then used with <code class="xref py py-func docutils literal notranslate"><span class="pre">make_fcpg()</span></code> to create FCPGs corrected for upstream basins.</p>
<div class="section" id="example-huc-4-cascading-work-flow">
<h6>Example HUC-4 Cascading Work Flow<a class="headerlink" href="#example-huc-4-cascading-work-flow" title="Permalink to this headline">¶</a></h6>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">FCPGtools</span> <span class="kn">as</span> <span class="nn">fcpg</span> <span class="c1"># Import the tools. </span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gpd</span>

<span class="c1"># Define the file input and output paths and the upstream region.</span>
<span class="n">upstreamFACfltau</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Upstream flow accumulation grid from TauDEM.</span>
<span class="n">upstreamFDRfltau</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Upstream flow direction grid in TauDEM format.</span>
<span class="n">downstreamFACfltau</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Downstream flow accumuation grid from TauDEM.</span>
<span class="n">downstreamFDRfltau</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Downstream flow direction grid in TauDEM format.</span>
<span class="n">updateDict</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Path to the update dictionary to create.</span>
<span class="n">downstreamFACWeight</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Path to the downstream FAC weighting grid. This is where the upstream value will be inserted.</span>
<span class="n">downstreamAdjFAC</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Path to output the adjusted FAC weighting grid.</span>
<span class="n">wbdPth</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Path to the watershed boundary dataset for the HUC-2 region you are working in.</span>
<span class="n">cores</span> <span class="o">=</span> <span class="mi">6</span> <span class="c1">#Number of cores to use for fcpg.adjustFAC() function</span>

<span class="c1"># Define upstream and downstream basins.</span>
<span class="n">upstream</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">downstream</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

<span class="c1"># Load the WBD.</span>
<span class="n">layer</span> <span class="o">=</span> <span class="s1">&#39;WBDHU12&#39;</span> <span class="c1"># HUC12 WBD layer with ToHUC codes.</span>
<span class="n">wbd</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">wbdPth</span><span class="p">,</span> <span class="n">layer</span> <span class="o">=</span> <span class="n">layer</span><span class="p">)</span> <span class="c1"># Load the WBD to a geodataframe.</span>

<span class="c1"># Convert HUC12 and ToHUC codes to 4-digit codes.,</span>
<span class="n">wbd</span><span class="p">[</span><span class="s1">&#39;HUC4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wbd</span><span class="o">.</span><span class="n">HUC12</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">fcpg</span><span class="o">.</span><span class="n">getHUC4</span><span class="p">)</span>
<span class="n">wbd</span><span class="p">[</span><span class="s1">&#39;ToHUC4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wbd</span><span class="o">.</span><span class="n">ToHUC</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">fcpg</span><span class="o">.</span><span class="n">getHUC4</span><span class="p">)</span>

<span class="c1"># Find basins that contain pour points.</span>
<span class="n">pourBasins</span> <span class="o">=</span> <span class="n">fcpg</span><span class="o">.</span><span class="n">makePourBasins</span><span class="p">(</span><span class="n">wbd</span><span class="p">,</span><span class="n">upstream</span><span class="p">,</span><span class="n">downstream</span><span class="p">)</span>

<span class="c1"># Find pour points between the upstream and downstream basins.</span>
<span class="n">pourPoints</span> <span class="o">=</span> <span class="n">fcpg</span><span class="o">.</span><span class="n">findPourPoints</span><span class="p">(</span><span class="n">pourBasins</span><span class="p">,</span> <span class="n">upstreamFACfltau</span><span class="p">,</span> <span class="n">upstreamFDRfltau</span><span class="p">,</span> <span class="n">plotBasins</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

<span class="c1"># Create update dictionary from the pour points.</span>
<span class="n">newX</span><span class="p">,</span><span class="n">newY</span><span class="p">,</span><span class="n">maxFAC</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">pourPoints</span><span class="p">)</span>
<span class="n">fcpg</span><span class="o">.</span><span class="n">createUpdateDict</span><span class="p">(</span><span class="n">newX</span><span class="p">,</span><span class="n">newY</span><span class="p">,</span><span class="n">maxFAC</span><span class="p">,</span><span class="n">upstream</span><span class="p">,</span><span class="n">updateDict</span><span class="p">)</span>

<span class="c1"># Update the downstream basin using the update dictionary.</span>
<span class="n">fcpg</span><span class="o">.</span><span class="n">adjustFAC</span><span class="p">(</span><span class="n">downstreamFACfltau</span><span class="p">,</span><span class="n">downstreamFACWeight</span><span class="p">,</span><span class="n">updateDict</span><span class="p">,</span><span class="n">downstreamFDRfltau</span><span class="p">,</span><span class="n">downstreamAdjFAC</span><span class="p">,</span> <span class="n">cores</span><span class="o">=</span><span class="n">cores</span><span class="p">)</span> <span class="c1"># note that this tool will create downstreamFACWeight if it does not exist based on downstreamFACfltau, see function documentation.</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<span id="document-two_digit"></span><div class="section" id="cascade-two-digit-hydrologic-regions">
<h5>Cascade Two-Digit Hydrologic Regions<a class="headerlink" href="#cascade-two-digit-hydrologic-regions" title="Permalink to this headline">¶</a></h5>
<p>This script provides an example work flow of how to cascade the last (maximum) accumulated area value from an upstream region, e.g. Region 14 – Upper Colorado, to the first cell of a downstream region, e.g. Region 15 – Lower Colorado. For this example, it is assumed that the user is working with ESRI-produced flow direction grids. Because of the differences in the encoding of flow directions calculated with ESRI tools and flow directions calculated with TauDEM, the FCPG tools require flow direction data to be converted to TauDEM encoding if they are not already. The process creates a json file containing the value to be cascaded, creates a weighting grid of ones for the downstream region, inserts the upstream value into the weighting grid at the correct location, and accumulates the weighting grid using the downstream flow direction grid to produce an adjusted flow accumulation grid for the downstream region. This process can be repeated for each parameter grid and then used with <code class="xref py py-func docutils literal notranslate"><span class="pre">make_fcpg()</span></code> to create FCPGs corrected for upstream regions.</p>
<div class="section" id="example-huc-2-cascading-work-flow">
<h6>Example HUC-2 Cascading Work Flow<a class="headerlink" href="#example-huc-2-cascading-work-flow" title="Permalink to this headline">¶</a></h6>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">FCPGtools</span> <span class="kn">as</span> <span class="nn">fcpg</span> <span class="c1"># Import the tools. </span>

<span class="c1"># Define the file input and output paths and the upstream region.</span>
<span class="n">upstreamFDRflesri</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Upstream flow direction grid in ESRI format.</span>
<span class="n">downstreamFDRflesri</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Downstream flow direction grid in ESRI format.</span>
<span class="n">upstreamFACfltau</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Upstream flow accumulation grid from TauDEM.</span>
<span class="n">upstreamFDRfltau</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Upstream flow direction grid in TauDEM format.</span>
<span class="n">downstreamFACfltau</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Downstream flow accumuation grid from TauDEM.</span>
<span class="n">downstreamFDRfltau</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Downstream flow direction grid in TauDEM format.</span>
<span class="n">region</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Hydrologic region to make the update dictionary for.</span>
<span class="n">updateDict</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Path to the update dictionary to create.</span>
<span class="n">downstreamFACWeight</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Path to the downstream FAC weighting grid. This is where the upstream value will be inserted.</span>
<span class="n">downstreamAdjFAC</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># Path to output the adjusted FAC weighting grid.</span>
<span class="n">cores</span> <span class="o">=</span> <span class="mi">8</span> <span class="c1">#Number of cores to use for fcpg.adjustFAC() function</span>

<span class="c1"># convert ESRI flow directions to TauDEM flow directions.</span>
<span class="n">fcpg</span><span class="o">.</span><span class="n">tauDrainDir</span><span class="p">(</span><span class="n">upstreamFDRflesri</span><span class="p">,</span> <span class="n">upstreamFDRfltau</span><span class="p">)</span>
<span class="n">fcpg</span><span class="o">.</span><span class="n">tauDrainDir</span><span class="p">(</span><span class="n">downstreamFDRflesri</span><span class="p">,</span> <span class="n">downstreamFDRfltau</span><span class="p">)</span>

<span class="c1"># Accumulate upstream FDR grid.</span>
<span class="n">fcpg</span><span class="o">.</span><span class="n">tauFlowAccum</span><span class="p">(</span><span class="n">upstreamFDRfltau</span><span class="p">,</span> <span class="n">upstreamFACfltau</span><span class="p">)</span>

<span class="c1"># Create the update dictionary to move data between HUC2 regions.</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">w</span> <span class="o">=</span> <span class="n">fcpg</span><span class="o">.</span><span class="n">findLastFACFD</span><span class="p">(</span><span class="n">upstreamFACfltau</span><span class="p">,</span> <span class="n">upstreamFACfltau</span><span class="p">)</span>
<span class="n">fcpg</span><span class="o">.</span><span class="n">createUpdateDict</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">region</span><span class="p">,</span><span class="n">updateDict</span><span class="p">)</span>

<span class="c1"># Make a grid of ones based on the downstream grid.</span>
<span class="n">fcpg</span><span class="o">.</span><span class="n">makeFACweight</span><span class="p">(</span><span class="n">downstreamFDRfltau</span><span class="p">,</span><span class="n">downstreamFACWeight</span><span class="p">)</span>

<span class="c1"># Create the updated flow accumulation grid with information from the upstream HUC inserted into the source grid.</span>
<span class="n">fcpg</span><span class="o">.</span><span class="n">adjustFAC</span><span class="p">(</span><span class="n">downstreamFDRfltau</span><span class="p">,</span><span class="n">downstreamFACWeight</span><span class="p">,</span>
              <span class="n">updateDict</span><span class="p">,</span><span class="n">downstreamFDRfltau</span><span class="p">,</span><span class="n">downstreamAdjFAC</span><span class="p">,</span><span class="n">cores</span><span class="o">=</span><span class="n">cores</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
</div>
<span id="document-detect_missing"></span><div class="section" id="detect-missing-fcpgs">
<h4>Detect Missing FCPGs<a class="headerlink" href="#detect-missing-fcpgs" title="Permalink to this headline">¶</a></h4>
<p>Helper script to iterate through geospatial tiles, HUC4 basins in this example, and to check for completed FCPGs. This is useful if you have many FCPGs to process.</p>
<div class="highlight-Python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">HUClist</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1002&quot;</span><span class="p">,</span> <span class="s2">&quot;1003&quot;</span><span class="p">,</span> <span class="s2">&quot;1004&quot;</span><span class="p">]</span> <span class="c1"># HUC4 geospatial tiles to search over.</span>

<span class="n">inDir</span> <span class="o">=</span> <span class="s2">&quot;../data/cov/static&quot;</span> <span class="c1"># Source parameter grid folder.</span>

<span class="n">FCPGdir</span> <span class="o">=</span> <span class="s2">&quot;../FCPGs&quot;</span> <span class="c1"># Output FCPG folder.</span>

<span class="n">covList</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#Initialize list of parameter grids.</span>

<span class="c1"># iterate through all source parameter grids.</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">inDir</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">subdirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">inDir</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                        <span class="c1">#Check if file is .tif or .vrt file, and if so add it to covariate list</span>
                        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">name</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;.tif&quot;</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">name</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;.vrt&quot;</span><span class="p">:</span>
                                <span class="n">covList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;The following covariate files were located in the specified directory:&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">covList</span><span class="p">)</span>

        <span class="n">missingList</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#Initialize list of missing files</span>

        <span class="c1"># iterate through source parameter grids and test if FCPGs have been created.</span>
        <span class="k">for</span> <span class="n">cov</span> <span class="ow">in</span> <span class="n">covList</span><span class="p">:</span>

                <span class="n">covname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">cov</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">#Get the name of the parameter grid</span>

                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">FCPGdir</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">HUC</span> <span class="ow">in</span> <span class="n">HUClist</span><span class="p">:</span>
                                <span class="c1">#Create the file name corresponding to the HUC and parameter grid</span>
                                <span class="n">FCPGFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FCPGdir</span><span class="p">,</span> <span class="n">HUC</span><span class="p">,</span><span class="n">covname</span> <span class="o">+</span> <span class="s2">&quot;_HUC&quot;</span> <span class="o">+</span> <span class="n">HUC</span> <span class="o">+</span><span class="s2">&quot;_FCPG.tif&quot;</span><span class="p">)</span> <span class="c1">#Create filepath for parameter FCPG file</span>

                                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">FCPGFile</span><span class="p">):</span>
                                        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Missing File: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FCPGFile</span><span class="p">))</span>
                                        <span class="n">missingList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">FCPGFile</span><span class="p">)</span>

                        
                <span class="k">else</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Error FCPG directory does  not exist: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FCPGdir</span><span class="p">))</span>
                        
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0} missing files found&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">missingList</span><span class="p">)))</span>

<span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Error input directory does  not exist: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inDir</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
</div>
<span id="document-functions"></span><div class="section" id="module-tools">
<span id="function-documentation"></span><span id="function-label"></span><h2>Function Documentation<a class="headerlink" href="#module-tools" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="tools.ExtremeUpslopeValue">
<code class="sig-name descname">ExtremeUpslopeValue</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fdr</span></em>, <em class="sig-param"><span class="n">param</span></em>, <em class="sig-param"><span class="n">output</span></em>, <em class="sig-param"><span class="n">accum_type</span><span class="o">=</span><span class="default_value">'MAX'</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">fac</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">thresh</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.ExtremeUpslopeValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for the TauDEM D8 Extreme Upslope Value function <a class="bibtex reference internal" href="index.html#taudem" id="id1">[1]</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>fdr</strong><span class="classifier">str</span></dt><dd><p>Path to a flow direction grid in TauDEM format.</p>
</dd>
<dt><strong>param</strong><span class="classifier">str</span></dt><dd><p>Path to parameter raster to run through the D8 Extreme Upslope Value tool</p>
</dd>
<dt><strong>output</strong><span class="classifier">str</span></dt><dd><p>Path to output raster file.</p>
</dd>
<dt><strong>accum_type</strong><span class="classifier">str (optional)</span></dt><dd><p>Either  “MAX” or “MIN.” Defaults to “MAX.”</p>
</dd>
<dt><strong>cores</strong><span class="classifier">int (optional)</span></dt><dd><p>Number of cores to run this process on. Defaults to 1.</p>
</dd>
<dt><strong>fac</strong><span class="classifier">str (optional)</span></dt><dd><p>Path to a flow accumulation raster. Defaults to None.</p>
</dd>
<dt><strong>thresh</strong><span class="classifier">int (optional)</span></dt><dd><p>Threshold values, in the same units as fac to mask output to stream channels. Defaults to None.</p>
</dd>
<dt><strong>mpiCall</strong><span class="classifier">str (optional)</span></dt><dd><p>The command to use for mpi, defaults to mpiexec.</p>
</dd>
<dt><strong>mpiArg</strong><span class="classifier">str (optional)</span></dt><dd><p>Argument flag passed to mpiCall, which is followed by the cores parameter.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>output</strong><span class="classifier">raster</span></dt><dd><p>Raster of either the maximum or minumum upslope value of the parameter grid supplied to the function.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.FindDownstreamCellTauDir">
<code class="sig-name descname">FindDownstreamCellTauDir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">w</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.FindDownstreamCellTauDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Find downstream cell given the flow direction of a reference cell using TauDEM flow directions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>d</strong><span class="classifier">int</span></dt><dd><p>Flow direction of the reference cell.</p>
</dd>
<dt><strong>x</strong><span class="classifier">float</span></dt><dd><p>Horizontal coordinate (either projected or unprojected).</p>
</dd>
<dt><strong>y</strong><span class="classifier">float</span></dt><dd><p>Vertical coordinate (either projected or unprojected).</p>
</dd>
<dt><strong>w</strong><span class="classifier">float</span></dt><dd><p>Cell size, in map units.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>x</strong><span class="classifier">float</span></dt><dd><p>Horizontal coordinate of the downstream cell.</p>
</dd>
<dt><strong>y</strong><span class="classifier">float</span></dt><dd><p>Vertical coordinate of the downstream cell.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.accumulateParam">
<code class="sig-name descname">accumulateParam</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">paramRast</span></em>, <em class="sig-param"><span class="n">fdr</span></em>, <em class="sig-param"><span class="n">accumRast</span></em>, <em class="sig-param"><span class="n">outNoDataRast</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">outNoDataAccum</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">zeroNoDataRast</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">mpiCall</span><span class="o">=</span><span class="default_value">'mpiexec'</span></em>, <em class="sig-param"><span class="n">mpiArg</span><span class="o">=</span><span class="default_value">'-n'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.accumulateParam" title="Permalink to this definition">¶</a></dt>
<dd><p>Accumulate a parameter grid using TauDEM AreaD8 <a class="bibtex reference internal" href="index.html#taudem" id="id2">[1]</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>paramRast</strong><span class="classifier">str</span></dt><dd><p>Raster of parameter values to accumulate; this file is modified by the function.</p>
</dd>
<dt><strong>fdr</strong><span class="classifier">str</span></dt><dd><p>Flow direction raster in TauDEM format.</p>
</dd>
<dt><strong>accumRast</strong><span class="classifier">str</span></dt><dd><p>File location to store accumulated parameter values.</p>
</dd>
<dt><strong>outNoDataRast</strong><span class="classifier">str (optional)</span></dt><dd><p>File location to store parameter no data raster.</p>
</dd>
<dt><strong>outNoDataAccum</strong><span class="classifier">str (optional)</span></dt><dd><p>File location to store accumulated no data raster.</p>
</dd>
<dt><strong>zeroNoDataRast</strong><span class="classifier">str (optional)</span></dt><dd><p>File location to store the no data raster filled with zeros.</p>
</dd>
<dt><strong>cores</strong><span class="classifier">int (optional)</span></dt><dd><p>The number of cores to use for parameter accumulation. Defaults to 1.</p>
</dd>
<dt><strong>mpiCall</strong><span class="classifier">str (optional)</span></dt><dd><p>The command to use for mpi, defaults to mpiexec.</p>
</dd>
<dt><strong>mpiArg</strong><span class="classifier">str (optional)</span></dt><dd><p>Argument flag passed to mpiCall, which is followed by the cores parameter.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>accumRast</strong><span class="classifier">raster</span></dt><dd><p>Raster of accumulated parameter values.</p>
</dd>
<dt><strong>outNoDataRast</strong><span class="classifier">raster</span></dt><dd><p>Raster of no data values.</p>
</dd>
<dt><strong>outNoDataRast</strong><span class="classifier">raster</span></dt><dd><p>Raster of accumulated no data values.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If outNoDataRast, outNoDataAccum, and zeroNoDataRast inputs are all supplied it will set any “no data” values in the basin to zero and save that raster as zeroNoDataRast. It will then save a raster with all no data values set to one and other values set to zero (outNoDataRast) and use tauDEM to accumulate it (outNoDataAccum). It will then accumulate the parameter from the zeroNoDataRast, and a subsequent correction will be needed in the make_fcpg() function based on the values in the outNoDataAccum raster.</p>
<p>If some of the output file locations for handling no data values aren’t supplied or “no data” values aren’t present in the parameter grid, it will simply accumulate the parameter grid. If “no data” values are present, this will result in them being propagated downstream.</p>
</dd></dl>

<dl class="py function">
<dt id="tools.accumulateParams">
<code class="sig-name descname">accumulateParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">paramRasts</span></em>, <em class="sig-param"><span class="n">fdr</span></em>, <em class="sig-param"><span class="n">outWorkspace</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">appStr</span><span class="o">=</span><span class="default_value">'accum'</span></em>, <em class="sig-param"><span class="n">mpiCall</span><span class="o">=</span><span class="default_value">'mpiexec'</span></em>, <em class="sig-param"><span class="n">mpiArg</span><span class="o">=</span><span class="default_value">'-n'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.accumulateParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Batch version of <a class="reference internal" href="#tools.accumulateParam" title="tools.accumulateParam"><code class="xref py py-func docutils literal notranslate"><span class="pre">accumulateParam()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>paramRasts</strong><span class="classifier">list</span></dt><dd><p>List of input parameter raster paths to accumulate along the supplied fdr.</p>
</dd>
<dt><strong>fdr</strong><span class="classifier">str</span></dt><dd><p>Path to the flow direction raster.</p>
</dd>
<dt><strong>outWorkspace</strong><span class="classifier">str</span></dt><dd><p>Path to the output directory for accumulation rasters.</p>
</dd>
<dt><strong>cores</strong><span class="classifier">int (optional)</span></dt><dd><p>Number of cores to use. Defaults to 1.</p>
</dd>
<dt><strong>appStr :str (optional)</strong></dt><dd><p>String of text to append to accumulated parameter filenames. Defaults to “accum.”</p>
</dd>
<dt><strong>mpiCall</strong><span class="classifier">str (optional)</span></dt><dd><p>MPI program to use to execute the program, defaults to mpiexec.</p>
</dd>
<dt><strong>mpiArg</strong><span class="classifier">str (optional)</span></dt><dd><p>Argument to pass to mpiCall, defaults to -n.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>fileList</strong><span class="classifier">list</span></dt><dd><p>List of file paths to accumulated parameter rasters.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.adjustFAC">
<code class="sig-name descname">adjustFAC</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">facWeighttemplate</span></em>, <em class="sig-param"><span class="n">downstreamFACweightFl</span></em>, <em class="sig-param"><span class="n">updateDictFl</span></em>, <em class="sig-param"><span class="n">downstreamFDRFl</span></em>, <em class="sig-param"><span class="n">adjFACFl</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">mpiCall</span><span class="o">=</span><span class="default_value">'mpiexec'</span></em>, <em class="sig-param"><span class="n">mpiArg</span><span class="o">=</span><span class="default_value">'-n'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.adjustFAC" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an updated flow accumulation grid (FAC) given an update dictionary produced by <a class="reference internal" href="#tools.createUpdateDict" title="tools.createUpdateDict"><code class="xref py py-func docutils literal notranslate"><span class="pre">createUpdateDict()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>facWeighttemplate</strong><span class="classifier">str</span></dt><dd><p>Path to a FDR or FAC grid used to make the FAC weighting grid.</p>
</dd>
<dt><strong>downstreamFACweightFl</strong><span class="classifier">str</span></dt><dd><p>Path to output the FAC weighting grid.</p>
</dd>
<dt><strong>updateDictFl</strong><span class="classifier">str</span></dt><dd><p>Path to update dictionary used to update the FAC weighting grid.</p>
</dd>
<dt><strong>downstreamFDRFl</strong><span class="classifier">str</span></dt><dd><p>Path to downstream FDR to use when computing the adjusted FAC grid.</p>
</dd>
<dt><strong>adjFACFl</strong><span class="classifier">str</span></dt><dd><p>Path to output the adjusted FAC raster.</p>
</dd>
<dt><strong>cores</strong><span class="classifier">int (Optional)</span></dt><dd><p>Number of cores to use. Defaults to 1.</p>
</dd>
<dt><strong>mpiCall</strong><span class="classifier">str (optional)</span></dt><dd><p>MPI program to use to execute the program, defaults to mpiexec.</p>
</dd>
<dt><strong>mpiArg</strong><span class="classifier">str (optional)</span></dt><dd><p>Argument to pass to mpiCall, defaults to -n.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>adjFACFl</strong><span class="classifier">raster</span></dt><dd><p>Adjusted flow accumulation raster at adjFACFl</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.adjustParam">
<code class="sig-name descname">adjustParam</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">updatedParam</span></em>, <em class="sig-param"><span class="n">downstreamParamFL</span></em>, <em class="sig-param"><span class="n">updateDictFl</span></em>, <em class="sig-param"><span class="n">adjParamFl</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.adjustParam" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an updated parameter grid given an update dictionary from <a class="reference internal" href="#tools.createUpdateDict" title="tools.createUpdateDict"><code class="xref py py-func docutils literal notranslate"><span class="pre">createUpdateDict()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>updatedParam</strong><span class="classifier">str</span></dt><dd><p>Name of the parameter to update.</p>
</dd>
<dt><strong>downstreamParamFL</strong><span class="classifier">str</span></dt><dd><p>Path to downstream parameter grid to update.</p>
</dd>
<dt><strong>updateDictFl</strong><span class="classifier">str</span></dt><dd><p>Path to update dictionary to use.</p>
</dd>
<dt><strong>adjParamFl</strong><span class="classifier">str</span></dt><dd><p>Path to output adjusted parameter file.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>adjParamFl</strong><span class="classifier">raster</span></dt><dd><p>Adjusted parameter raster that can be accumulated prior to FCPG creation.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.applyMult">
<code class="sig-name descname">applyMult</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inRast</span></em>, <em class="sig-param"><span class="n">mult</span></em>, <em class="sig-param"><span class="n">outRast</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.applyMult" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply input raster by mult.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inRast</strong><span class="classifier">str</span></dt><dd><p>Path to input raster.</p>
</dd>
<dt><strong>mult</strong><span class="classifier">str</span></dt><dd><p>Path to multiplier raster.</p>
</dd>
<dt><strong>outRast</strong><span class="classifier">str</span></dt><dd><p>Path to output raster.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>outRast</strong><span class="classifier">raster</span></dt><dd><p>Input raster multiplied by the multiplier raster.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.binarizeCat">
<code class="sig-name descname">binarizeCat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">val</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">nodata</span></em>, <em class="sig-param"><span class="n">outWorkspace</span></em>, <em class="sig-param"><span class="n">baseName</span></em>, <em class="sig-param"><span class="n">ext</span></em>, <em class="sig-param"><span class="n">profile</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.binarizeCat" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a categorical raster (e.g. land cover type) into a set of binary rasters, one for each category in the supplied raster, zero for areas where that class is not present, 1 for areas where that class is present, and -1 for regions of no data in the supplied raster. See also <a class="reference internal" href="#tools.cat2bin" title="tools.cat2bin"><code class="xref py py-func docutils literal notranslate"><span class="pre">cat2bin()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">np.array</span></dt><dd><p>Numpy array of raster data to convert to binary.</p>
</dd>
<dt><strong>val</strong><span class="classifier">int</span></dt><dd><p>Raster value to extract binary for from data.</p>
</dd>
<dt><strong>nodata</strong><span class="classifier">int or float</span></dt><dd><p>Raster no data value.</p>
</dd>
<dt><strong>outWorkspace</strong><span class="classifier">str</span></dt><dd><p>Path to folder to save binary output rasters to.</p>
</dd>
<dt><strong>baseName</strong><span class="classifier">str</span></dt><dd><p>Base name for the output rasters.</p>
</dd>
<dt><strong>ext</strong><span class="classifier">str</span></dt><dd><p>File extension for output rasters.</p>
</dd>
<dt><strong>profile</strong><span class="classifier">dict</span></dt><dd><p>Rasterio metadata dictionary decribing the properties used to create the output raster.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>catRaster</strong><span class="classifier">str</span></dt><dd><p>Filepath to the binary raster created.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.cat2bin">
<code class="sig-name descname">cat2bin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inCat</span></em>, <em class="sig-param"><span class="n">outWorkspace</span></em>, <em class="sig-param"><span class="n">par</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.cat2bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a categorical raster (e.g. land cover type) into a set of binary rasters, one for each category in the supplied raster, zero for areas where that class is not present, 1 for areas where that class is present, and -1 for regions of no data in the supplied raster. Wrapper on <a class="reference internal" href="#tools.binarizeCat" title="tools.binarizeCat"><code class="xref py py-func docutils literal notranslate"><span class="pre">binarizeCat()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inCat</strong><span class="classifier">str</span></dt><dd><p>Input catagorical parameter raster.</p>
</dd>
<dt><strong>outWorkspace</strong><span class="classifier">str</span></dt><dd><p>Workspace to save binary raster output files.</p>
</dd>
<dt><strong>par</strong><span class="classifier">bool</span></dt><dd><p>Use parallel processing to generate binary rasters.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>fileList</strong><span class="classifier">list</span></dt><dd><p>List of filepaths to output files.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.changeNoData">
<code class="sig-name descname">changeNoData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inRast</span></em>, <em class="sig-param"><span class="n">newNoData</span></em>, <em class="sig-param"><span class="n">updateDict</span><span class="o">=</span><span class="default_value">{'compress': 'LZW', 'profile': 'GeoTIFF', 'tiled': True, 'sparse_ok': True, 'num_threads': 'ALL_CPUS', 'bigtiff': 'IF_SAFER'}</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.changeNoData" title="Permalink to this definition">¶</a></dt>
<dd><p>Update raster no data value to a new value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inRast</strong><span class="classifier">str</span></dt><dd><p>Path to input raster file.</p>
</dd>
<dt><strong>newNoData</strong><span class="classifier">str</span></dt><dd><p>New no data value for the raster.</p>
</dd>
<dt><strong>updateDict</strong><span class="classifier">dict (optional)</span></dt><dd><p>Dictionary of Rasterio parameters used to create the updated raster.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.createUpdateDict">
<code class="sig-name descname">createUpdateDict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">upstreamFACmax</span></em>, <em class="sig-param"><span class="n">fromHUC</span></em>, <em class="sig-param"><span class="n">outfl</span></em>, <em class="sig-param"><span class="n">replaceDict</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.createUpdateDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dictionary for updating downstream FAC and parameter grids using values pulled from the next grid upstream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x</strong><span class="classifier">list</span></dt><dd><p>Horizontal coordinate(s) for where the update needs to happen in the downstream grid.</p>
</dd>
<dt><strong>y</strong><span class="classifier">list</span></dt><dd><p>Vertical coordinate(s) for where the update needs to happen in the downstream grid.</p>
</dd>
<dt><strong>upstreamFACmax</strong><span class="classifier">list</span></dt><dd><p>Value(s) to insert into the downstream FAC grid.</p>
</dd>
<dt><strong>fromHUC</strong><span class="classifier">str</span></dt><dd><p>The upstream HUC that the values are coming from.</p>
</dd>
<dt><strong>outfl</strong><span class="classifier">str (path)</span></dt><dd><p>Path to where to save the json of this dictionary. The convention is to name this by the downstream HUC.</p>
</dd>
<dt><strong>replaceDict</strong><span class="classifier">bool (optional)</span></dt><dd><p>Replace the update dictionary instead of updating with a new value. Defaults to True.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>updateDict</strong><span class="classifier">dict</span></dt><dd><p>Update dictionary that is also written to outfl.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.d8todinfinity">
<code class="sig-name descname">d8todinfinity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inRast</span></em>, <em class="sig-param"><span class="n">outRast</span></em>, <em class="sig-param"><span class="n">updateDict</span><span class="o">=</span><span class="default_value">{'dtype': 'float32', 'compress': 'LZW', 'profile': 'GeoTIFF', 'tiled': True, 'sparse_ok': True, 'num_threads': 'ALL_CPUS', 'nodata': - 1, 'bigtiff': 'IF_SAFER'}</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.d8todinfinity" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert TauDEM D-8 flow directions to D-Infinity flow directions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inRast</strong><span class="classifier">str</span></dt><dd><p>Path to a TauDEM D-8 flow direction raster.</p>
</dd>
<dt><strong>outRast</strong><span class="classifier">str</span></dt><dd><p>Path to output the TauDEM D-Infinity flow direction raster.</p>
</dd>
<dt><strong>updateDict</strong><span class="classifier">dict (optional)</span></dt><dd><p>Dictionary of Rasterio parameters used to write out the GeoTiff.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>outRast</strong><span class="classifier">str</span></dt><dd><p>Path to output the TauDEM D-Infinity flow direction raster.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.decayAccum">
<code class="sig-name descname">decayAccum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ang</span></em>, <em class="sig-param"><span class="n">mult</span></em>, <em class="sig-param"><span class="n">outRast</span></em>, <em class="sig-param"><span class="n">paramRast</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">mpiCall</span><span class="o">=</span><span class="default_value">'mpiexec'</span></em>, <em class="sig-param"><span class="n">mpiArg</span><span class="o">=</span><span class="default_value">'-n'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.decayAccum" title="Permalink to this definition">¶</a></dt>
<dd><p>Decay the accumulation of a parameter raster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>ang</strong><span class="classifier">str</span></dt><dd><p>Path to flow angle raster from the TauDEM D-Infinity flow direction tool.</p>
</dd>
<dt><strong>mult</strong><span class="classifier">str</span></dt><dd><p>Path to raster of multiplier values applied to upstream accumulations, 1 corresponds to no decay, 0 corresponds to complete decay.</p>
</dd>
<dt><strong>outRast</strong><span class="classifier">str</span></dt><dd><p>Path to output raster for decayed accumulation raster.</p>
</dd>
<dt><strong>paramRast</strong><span class="classifier">str (optional)</span></dt><dd><p>Raster of parameter values to accumulate. If not supplied area will be accumulated. Defaults to None.</p>
</dd>
<dt><strong>cores</strong><span class="classifier">int (optional)</span></dt><dd><p>Number of cores to use. Defaults to 1.</p>
</dd>
<dt><strong>mpiCall</strong><span class="classifier">str (optional)</span></dt><dd><p>The command to use for mpi, defaults to mpiexec.</p>
</dd>
<dt><strong>mpiArg</strong><span class="classifier">str (optional)</span></dt><dd><p>Argument flag passed to mpiCall, which is followed by the cores parameter.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>outRast</strong><span class="classifier">raster</span></dt><dd><p>Decayed accumulation raster, either area or parameter depending on what is supplied to the function.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.dist2stream">
<code class="sig-name descname">dist2stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fdr</span></em>, <em class="sig-param"><span class="n">fac</span></em>, <em class="sig-param"><span class="n">thresh</span></em>, <em class="sig-param"><span class="n">outRast</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">mpiCall</span><span class="o">=</span><span class="default_value">'mpiexec'</span></em>, <em class="sig-param"><span class="n">mpiArg</span><span class="o">=</span><span class="default_value">'-n'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.dist2stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute distance to streams.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>fdr</strong><span class="classifier">str</span></dt><dd><p>Path to flow direction raster in TauDEM format.</p>
</dd>
<dt><strong>fac</strong><span class="classifier">str</span></dt><dd><p>Path to flow accumulation raster.</p>
</dd>
<dt><strong>thresh</strong><span class="classifier">int</span></dt><dd><p>Accumulation threshold for stream formation in number of grid cells.</p>
</dd>
<dt><strong>outRast</strong><span class="classifier">str</span></dt><dd><p>Path to output the distance raster.</p>
</dd>
<dt><strong>cores</strong><span class="classifier">int (optional)</span></dt><dd><p>The number of cores to use. Defaults to 1.</p>
</dd>
<dt><strong>mpiCall</strong><span class="classifier">str (optional)</span></dt><dd><p>The command to use for mpi, defaults to mpiexec.</p>
</dd>
<dt><strong>mpiArg</strong><span class="classifier">str (optional)</span></dt><dd><p>Argument flag passed to mpiCall, which is followed by the cores parameter.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>outRast</strong><span class="classifier">raster</span></dt><dd><p>Raster with values of D-8 flow distance from each cell to the nearest stream.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.findLastFACFD">
<code class="sig-name descname">findLastFACFD</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">facfl</span></em>, <em class="sig-param"><span class="n">fl</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.findLastFACFD" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the coordinate of the greatest cell in facfl, return the value from fl at that point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>facfl</strong><span class="classifier">str</span></dt><dd><p>Path to a flow accumulation grid.</p>
</dd>
<dt><strong>fl</strong><span class="classifier">str (optional)</span></dt><dd><p>Path to an accumulated parameter file. Defaults to None. If None, the facfl is queried.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>x</strong><span class="classifier">float</span></dt><dd><p>Horizontal coordinate of the greatest FAC cell.</p>
</dd>
<dt><strong>y</strong><span class="classifier">float</span></dt><dd><p>Vertical coordinate of the greatest FAC cell.</p>
</dd>
<dt><strong>d</strong><span class="classifier">float</span></dt><dd><p>Value from the parameter grid queried.</p>
</dd>
<dt><strong>w</strong><span class="classifier">float</span></dt><dd><p>Cell size of the grid.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This can be used to find the flow direction of the FAC cell with the greatest accumulation value or the parameter value of the cell with the greatest accumulation value.</p>
</dd></dl>

<dl class="py function">
<dt id="tools.findPourPoints">
<code class="sig-name descname">findPourPoints</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pourBasins</span></em>, <em class="sig-param"><span class="n">upfacfl</span></em>, <em class="sig-param"><span class="n">upfdrfl</span></em>, <em class="sig-param"><span class="n">plotBasins</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.findPourPoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds unique pour points between two HUC4s.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pourBasins</strong><span class="classifier">GeoDataframe</span></dt><dd><p>GeoDataframe of the HUC12 basins that flow into the downstream HUC4. Used to clip the upstream FAC grid to identify pour points.</p>
</dd>
<dt><strong>upfacfl</strong><span class="classifier">str</span></dt><dd><p>Path to the upstream flow accumulation grid.</p>
</dd>
<dt><strong>upfdrfl</strong><span class="classifier">str</span></dt><dd><p>Path to the upstream tauDEM flow direction grid.</p>
</dd>
<dt><strong>plotBasins</strong><span class="classifier">bool (Optional)</span></dt><dd><p>Boolean to make plots of upstream HUC12s and identified pour points. Defaults to False.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>finalPoints</strong><span class="classifier">list</span></dt><dd><p>List of tuples containing (x,y,w). These pour points have not been incremented downstream and can be used to query accumulated (but not FCPGed) upstream parameter grids for information to cascade down to the next hydrologic region / geospatial tile downstream.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.getFeatures">
<code class="sig-name descname">getFeatures</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">gdf</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.getFeatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to parse features from a GeoPandas GeoDataframe in such a manner that Rasterio can handle them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>gdf</strong><span class="classifier">GeoDataframe</span></dt><dd><p>GeoPandas GeoDataframe with a geometry column.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>features</strong><span class="classifier">geoJSON</span></dt><dd><p>GeoJSON representation of geometry features from the input GeoDataFrame.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.getHUC4">
<code class="sig-name descname">getHUC4</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">HUC12</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.getHUC4" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to return HUC4 representation from a HUC12 identifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>HUC12</strong><span class="classifier">str</span></dt><dd><p>Text representation of the HUC12 identifier.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>HUC4</strong><span class="classifier">str</span></dt><dd><p>HUC4 identifier.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.loadJSON">
<code class="sig-name descname">loadJSON</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">infl</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.loadJSON" title="Permalink to this definition">¶</a></dt>
<dd><p>Load dictionary stored in a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>infl</strong><span class="classifier">str</span></dt><dd><p>Path to the JSON to be loaded.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>dictionary</strong><span class="classifier">dict</span></dt><dd><p>Dictionary that was loaded.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.loadRaster">
<code class="sig-name descname">loadRaster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fl</span></em>, <em class="sig-param"><span class="n">returnMeta</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">band</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.loadRaster" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to load raster data and metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>fl</strong><span class="classifier">str</span></dt><dd><p>Path to the raster file to load.</p>
</dd>
<dt><strong>returnMeta</strong><span class="classifier">bool (Optional)</span></dt><dd><p>Return the raster metadata. Defaults to False.</p>
</dd>
<dt><strong>band</strong><span class="classifier">int (Optional)</span></dt><dd><p>Band to read from the raster. Defaults to one.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>dat</strong><span class="classifier">np.array</span></dt><dd><p>Numpy array of the data in the selected raster band.</p>
</dd>
<dt><strong>meta</strong><span class="classifier">dict</span></dt><dd><p>Dictionary of raster metadata.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.makeDecayGrid">
<code class="sig-name descname">makeDecayGrid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d2strm</span></em>, <em class="sig-param"><span class="n">k</span></em>, <em class="sig-param"><span class="n">outRast</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.makeDecayGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a decay raster where grid cell values are computed as the inverse number of grid cells, <span class="math notranslate nohighlight">\(\frac{dx}{n+k*dx}\)</span>, where n is the distance from the d2strm raster and    from each grid cell to the nearest stream, k is the constant applied to the stream distance values, and dx is the cell size of the raster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>d2strm</strong><span class="classifier">str</span></dt><dd><p>Path to raster of flow distances from each grid cell to the nearest stream.</p>
</dd>
<dt><strong>k</strong><span class="classifier">float</span></dt><dd><p>Constant applied to decay factor denominator; this has units equal to the horizontal map units in the d2strm raster.</p>
</dd>
<dt><strong>outRast</strong><span class="classifier">str</span></dt><dd><p>Output file path for decay grid.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>outRast</strong><span class="classifier">raster</span></dt><dd><p>Raster file with grid cells values representing weights decaying as a function of the distance to stream.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.makeFACweight">
<code class="sig-name descname">makeFACweight</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ingrd</span></em>, <em class="sig-param"><span class="n">outWeight</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.makeFACweight" title="Permalink to this definition">¶</a></dt>
<dd><p>Make FAC weighting grid of ones based on the extents of the input grid. No-data cells are persisted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>ingrd</strong><span class="classifier">str</span></dt><dd><p>Path to input raster from which to generate the weighting grid from.</p>
</dd>
<dt><strong>outWeight</strong><span class="classifier">str</span></dt><dd><p>Path to the output weighting raster generated.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>outWeight</strong><span class="classifier">raster</span></dt><dd><p>Raster of the same extent and resolution as the input grid, but filled with ones where data exist. No-data cells are persisted.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.makePourBasins">
<code class="sig-name descname">makePourBasins</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wbd</span></em>, <em class="sig-param"><span class="n">fromHUC4</span></em>, <em class="sig-param"><span class="n">toHUC4</span></em>, <em class="sig-param"><span class="n">HUC12Key</span><span class="o">=</span><span class="default_value">'HUC12'</span></em>, <em class="sig-param"><span class="n">ToHUCKey</span><span class="o">=</span><span class="default_value">'TOHUC'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.makePourBasins" title="Permalink to this definition">¶</a></dt>
<dd><p>Make geodataframe of HUC12 basis flowing from fromHUC4 to toHUC4.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>wbd</strong><span class="classifier">GeoDataframe</span></dt><dd><p>HUC12-level geodataframe projected to the same coordinate reference system (CRS) as the flow accumulation (FAC) and flow direction (FDR) grids being used.</p>
</dd>
<dt><strong>fromHUC4</strong><span class="classifier">str</span></dt><dd><p>HUC4 string for the upstream basin.</p>
</dd>
<dt><strong>toHUC4</strong><span class="classifier">str</span></dt><dd><p>HUC string for the downstream basin.</p>
</dd>
<dt><strong>HUC12Key</strong><span class="classifier">str (optional)</span></dt><dd><p>Column name for HUC codes to process down to HUC4 codes, defaults to ‘HUC12’.</p>
</dd>
<dt><strong>ToHUCKey</strong><span class="classifier">str (optional)</span></dt><dd><p>Column name for the column that indicates the downstream HUC for each row of the dataframe, defaults to ‘TOHUC’.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>pourBasins</strong><span class="classifier">GeoDataframe</span></dt><dd><p>HUC12-level geodataframe of units that drain from fromHUC4 to toHUC4.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.make_fcpg">
<code class="sig-name descname">make_fcpg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">accumParam</span></em>, <em class="sig-param"><span class="n">fac</span></em>, <em class="sig-param"><span class="n">outRast</span></em>, <em class="sig-param"><span class="n">noDataRast</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">minAccum</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.make_fcpg" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a flow-conditioned parameter grid using accumulated parameter and area rasters. See also <a class="reference internal" href="#tools.make_fcpgs" title="tools.make_fcpgs"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_fcpgs()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>accumParam</strong><span class="classifier">str</span></dt><dd><p>File location of the accumulated parameter data raster.</p>
</dd>
<dt><strong>fac</strong><span class="classifier">str</span></dt><dd><p>File location of the flow accumulation raster.</p>
</dd>
<dt><strong>outRast</strong><span class="classifier">str</span></dt><dd><p>File location of the output flow-conditioned parameter grid.</p>
</dd>
<dt><strong>noDataRast</strong><span class="classifier">str</span></dt><dd><p>File location of the accumulated parameter no data raster.</p>
</dd>
<dt><strong>minAccum</strong><span class="classifier">float</span></dt><dd><p>Value of flow accumulation below which the CPG values will be set to no data</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>outRast</strong><span class="classifier">raster</span></dt><dd><p>Flow-conditioned parameter grid file where grid cell values represent the mean upstream value of the paramter.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.make_fcpgs">
<code class="sig-name descname">make_fcpgs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">accumParams</span></em>, <em class="sig-param"><span class="n">fac</span></em>, <em class="sig-param"><span class="n">outWorkspace</span></em>, <em class="sig-param"><span class="n">minAccum</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">appStr</span><span class="o">=</span><span class="default_value">'FCPG'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.make_fcpgs" title="Permalink to this definition">¶</a></dt>
<dd><p>Batch version of <a class="reference internal" href="#tools.make_fcpg" title="tools.make_fcpg"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_fcpg()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>accumParams</strong><span class="classifier">list</span></dt><dd><p>List of accumulated parameter rasters to create FCPGs from.</p>
</dd>
<dt><strong>fac</strong><span class="classifier">str</span></dt><dd><p>Path to the flow accumulation raster.</p>
</dd>
<dt><strong>outWorkspace</strong><span class="classifier">str</span></dt><dd><p>Path to an output directory for produced FCPGs.</p>
</dd>
<dt><strong>minAccum</strong><span class="classifier">int (optional)</span></dt><dd><p>Minimum accumulation value below which the output FCPG will be turned to no data values. Defaults to None.</p>
</dd>
<dt><strong>appStr</strong><span class="classifier">str (optional)</span></dt><dd><p>String of text to append to filenames of the produced FCPG grids.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>fileList</strong><span class="classifier">list</span></dt><dd><p>List of file paths to the produced FCPGs.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.maskStreams">
<code class="sig-name descname">maskStreams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inRast</span></em>, <em class="sig-param"><span class="n">streamRast</span></em>, <em class="sig-param"><span class="n">outRast</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.maskStreams" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask areas not on the stream network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inRast</strong><span class="classifier">str</span></dt><dd><p>Path to the input raster to mask.</p>
</dd>
<dt><strong>streamRast</strong><span class="classifier">str</span></dt><dd><p>Path to the stream raster where all non-stream cells are set to no data.</p>
</dd>
<dt><strong>outRast</strong><span class="classifier">str</span></dt><dd><p>Path to output raster file.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>outRast</strong><span class="classifier">raster</span></dt><dd><p>Raster with non-stream cells set to the no data value from inRast.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.parsebool">
<code class="sig-name descname">parsebool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">b</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.parsebool" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a boolean argument from the command line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>b</strong><span class="classifier">str</span></dt><dd><p>String of either True or False.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>res</strong><span class="classifier">bool</span></dt><dd><p>True if b is “True” or False if b is not “True.”</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.queryPoint">
<code class="sig-name descname">queryPoint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">grd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.queryPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Query grid based on a supplied point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x</strong><span class="classifier">float or int</span></dt><dd><p>Horizontal coordinate in grid projection.</p>
</dd>
<dt><strong>y</strong><span class="classifier">float or int</span></dt><dd><p>Vertical coordinate in grid projection.</p>
</dd>
<dt><strong>grd</strong><span class="classifier">str</span></dt><dd><p>Path to raster to query based on the supplied x and y coordinates.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>value</strong><span class="classifier">float or int</span></dt><dd><p>Value queried from the supplied raster.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.resampleParam">
<code class="sig-name descname">resampleParam</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inParam</span></em>, <em class="sig-param"><span class="n">fdr</span></em>, <em class="sig-param"><span class="n">outParam</span></em>, <em class="sig-param"><span class="n">resampleMethod</span><span class="o">=</span><span class="default_value">'bilinear'</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">forceProj</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">forceProj4</span><span class="o">=</span><span class="default_value">'&quot;+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs&quot;'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.resampleParam" title="Permalink to this definition">¶</a></dt>
<dd><p>Resample, re-project, and clip the parameter raster based on the resolution, projection, and extent of the of the flow direction raster supplied. See also <a class="reference internal" href="#tools.resampleParams" title="tools.resampleParams"><code class="xref py py-func docutils literal notranslate"><span class="pre">resampleParams()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inParam</strong><span class="classifier">str</span></dt><dd><p>Path to the input parameter data raster</p>
</dd>
<dt><strong>fdr</strong><span class="classifier">str</span></dt><dd><p>Path to the flow direction raster</p>
</dd>
<dt><strong>outParam</strong><span class="classifier">str</span></dt><dd><p>Path to the output file for the resampled parameter raster.</p>
</dd>
<dt><strong>resampleMethod</strong><span class="classifier">str (optional)</span></dt><dd><p>resampling method, either ‘bilinear’ or ‘nearest neighbor’. Bilinear should generally be used for continuous data sets such as precipitation while nearest neighbor should generally be used for categorical datasets such as land cover type. Defaults to bilinear.</p>
</dd>
<dt><strong>cores</strong><span class="classifier">int (optional)</span></dt><dd><p>The number of cores to use. Defaults to 1.</p>
</dd>
<dt><strong>forceProj</strong><span class="classifier">bool (optional)</span></dt><dd><p>Force the projection of the flow direction raster. This can be useful if the flow direction raster has an unusual projection. Defaults to False.</p>
</dd>
<dt><strong>forceProj4</strong><span class="classifier">str (optional)</span></dt><dd><p>Proj4 string used to force the flow direction raster. This defaults to USGS Albers, but is not used unless the forceProj parameter is set to True.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>outParam</strong><span class="classifier">raster</span></dt><dd><p>Resampled, reprojected, and clipped parameter raster.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.resampleParams">
<code class="sig-name descname">resampleParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inParams</span></em>, <em class="sig-param"><span class="n">fdr</span></em>, <em class="sig-param"><span class="n">outWorkspace</span></em>, <em class="sig-param"><span class="n">resampleMethod</span><span class="o">=</span><span class="default_value">'bilinear'</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">appStr</span><span class="o">=</span><span class="default_value">'rprj'</span></em>, <em class="sig-param"><span class="n">forceProj</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">forceProj4</span><span class="o">=</span><span class="default_value">'&quot;+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs&quot;'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.resampleParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Batch version of <a class="reference internal" href="#tools.resampleParam" title="tools.resampleParam"><code class="xref py py-func docutils literal notranslate"><span class="pre">resampleParam()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inParam</strong><span class="classifier">list</span></dt><dd><p>List of input parameter raster paths.</p>
</dd>
<dt><strong>fdr</strong><span class="classifier">str</span></dt><dd><p>Path to the flow direction raster.</p>
</dd>
<dt><strong>outWorkspace :</strong></dt><dd><p>Path to the output directory for the resampled rasters.</p>
</dd>
<dt><strong>resampleMethod</strong><span class="classifier">str (optional)</span></dt><dd><p>Resampling method, either bilinear or nearest neighbor. Defaults to bilinear.</p>
</dd>
<dt><strong>cores :</strong></dt><dd><p>Number of cores to use. Defaults to 1.</p>
</dd>
<dt><strong>appStr</strong><span class="classifier">str (optional)</span></dt><dd><p>String of text to append to the input parameter filenames. Defaults to “rprj.”</p>
</dd>
<dt><strong>forceProj</strong><span class="classifier">bool (optional)</span></dt><dd><p>Force the projection of the flow direction raster. This can be useful if the flow direction raster has an unusual projection. Defaults to False.</p>
</dd>
<dt><strong>forceProj4</strong><span class="classifier">str (optional)</span></dt><dd><p>Proj4 string used to force the flow direction raster. This defaults to USGS Albers, but is not used unless the forceProj parameter is set to True.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>fileList</strong><span class="classifier">list</span></dt><dd><p>Paths to resampled, reprojected, and clipped parameter rasters.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.saveJSON">
<code class="sig-name descname">saveJSON</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dictionary</span></em>, <em class="sig-param"><span class="n">outfl</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.saveJSON" title="Permalink to this definition">¶</a></dt>
<dd><p>Save dictionary to JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>dictionary</strong><span class="classifier">dict</span></dt><dd><p>Dictionary to be saved.</p>
</dd>
<dt><strong>outfl</strong><span class="classifier">str</span></dt><dd><p>Path for where to generate the JSON</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.tauDrainDir">
<code class="sig-name descname">tauDrainDir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inRast</span></em>, <em class="sig-param"><span class="n">outRast</span></em>, <em class="sig-param"><span class="n">updateDict</span><span class="o">=</span><span class="default_value">{'compress': 'LZW', 'sparse': True, 'tiled': True, 'blockysize': 256, 'blockxsize': 256, 'driver': 'GTiff', 'nodata': 0}</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.tauDrainDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Reclassifies ESRI flow directions into TauDEM flow directions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inRast</strong><span class="classifier">str</span></dt><dd><p>Path to a raster encoded with ESRI flow direction values.</p>
</dd>
<dt><strong>outRast</strong><span class="classifier">str</span></dt><dd><p>Path to output a raster with flow directions encoded for TauDEM. File will be overwritten if it already exists.</p>
</dd>
<dt><strong>updateDict</strong><span class="classifier">dict (optional)</span></dt><dd><p>Dictionary of Rasterio raster options used to create outRast. Defaults have been supplied, but may not work in all situations and input file formats.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>outRast</strong><span class="classifier">raster</span></dt><dd><p>Reclassified flow direction raster at the path specified above.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.tauFlowAccum">
<code class="sig-name descname">tauFlowAccum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fdr</span></em>, <em class="sig-param"><span class="n">accumRast</span></em>, <em class="sig-param"><span class="n">cores</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">mpiCall</span><span class="o">=</span><span class="default_value">'mpiexec'</span></em>, <em class="sig-param"><span class="n">mpiArg</span><span class="o">=</span><span class="default_value">'-n'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.tauFlowAccum" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for TauDEM AreaD8 <a class="bibtex reference internal" href="index.html#taudem" id="id3">[1]</a> to produce a flow acculation grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>fdr</strong><span class="classifier">str</span></dt><dd><p>Path to a flow direction raster in TauDEM format.</p>
</dd>
<dt><strong>accumRast</strong><span class="classifier">str</span></dt><dd><p>Path to output the flow accumulation raster.</p>
</dd>
<dt><strong>cores</strong><span class="classifier">int (optional)</span></dt><dd><p>Number of cores to use. Defaults to 1.</p>
</dd>
<dt><strong>mpiCall</strong><span class="classifier">str (optional)</span></dt><dd><p>The command to use for mpi, defaults to mpiexec.</p>
</dd>
<dt><strong>mpiArg</strong><span class="classifier">str (optional)</span></dt><dd><p>Argument flag passed to mpiCall, which is followed by the cores parameter.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>accumRast</strong><span class="classifier">raster</span></dt><dd><p>Raster of accumulated parameter values at the path specified above.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.updateDict">
<code class="sig-name descname">updateDict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ud</span></em>, <em class="sig-param"><span class="n">upHUC</span></em>, <em class="sig-param"><span class="n">varName</span></em>, <em class="sig-param"><span class="n">val</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.updateDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Update dictionary created using <a class="reference internal" href="#tools.createUpdateDict" title="tools.createUpdateDict"><code class="xref py py-func docutils literal notranslate"><span class="pre">createUpdateDict()</span></code></a> with a parameter value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>ud</strong><span class="classifier">str</span></dt><dd><p>Path to the update dictionary to add a parameter to.</p>
</dd>
<dt><strong>upHUC</strong><span class="classifier">str</span></dt><dd><p>Name of the upstream HUC that the parameter corresponds to.</p>
</dd>
<dt><strong>varName</strong><span class="classifier">str</span></dt><dd><p>Name to use for the parameter.</p>
</dd>
<dt><strong>val</strong><span class="classifier">list, int or float</span></dt><dd><p>Value to add to the upstream dictonary.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>ud</strong><span class="classifier">json</span></dt><dd><p>Update dictionary written back out to ud.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="tools.updateRaster">
<code class="sig-name descname">updateRaster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">val</span></em>, <em class="sig-param"><span class="n">grd</span></em>, <em class="sig-param"><span class="n">outgrd</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tools.updateRaster" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert value into grid at location specified by x,y; writes new raster to output grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>x</strong><span class="classifier">list or float</span></dt><dd><p>Horizontal coordinate in map units.</p>
</dd>
<dt><strong>y</strong><span class="classifier">list of float</span></dt><dd><p>Vertical coordinate in map units.</p>
</dd>
<dt><strong>val</strong><span class="classifier">int or float</span></dt><dd><p>Value to insert into raster at grd.</p>
</dd>
<dt><strong>grd</strong><span class="classifier">str</span></dt><dd><p>Path to raster to be updated.</p>
</dd>
<dt><strong>outgrd</strong><span class="classifier">str (path)</span></dt><dd><p>Path to write updated raster to.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>dat</strong><span class="classifier">raster</span></dt><dd><p>Raster dataset written to grdout.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-netCDFmaker"></span><dl class="py function">
<dt id="netCDFmaker.buildNC">
<code class="sig-name descname">buildNC</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inDir</span></em>, <em class="sig-param"><span class="n">outFile</span></em>, <em class="sig-param"><span class="n">metaDict</span></em>, <em class="sig-param"><span class="n">cl</span><span class="o">=</span><span class="default_value">9</span></em>, <em class="sig-param"><span class="n">profile</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#netCDFmaker.buildNC" title="Permalink to this definition">¶</a></dt>
<dd><p>Build netCDF file from a stack of GeoTiffs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>inDir</strong><span class="classifier">str</span></dt><dd><p>Directory with geotiff files to be converted, specified as ‘/dir/here/*.tif’</p>
</dd>
<dt><strong>outFile</strong><span class="classifier">str</span></dt><dd><p>Output filename with ‘.nc’ included.</p>
</dd>
<dt><strong>metaDict</strong><span class="classifier">dict</span></dt><dd><p>Metadata dictionary used to populate fields in the netCDF. See Notes below for a description of fields to include.</p>
</dd>
<dt><strong>cl</strong><span class="classifier">int</span></dt><dd><p>Compression level, 1-9. A higher value will result in a smaller output file, but will take longer.</p>
</dd>
<dt><strong>profile</strong><span class="classifier">dict (optional)</span></dt><dd><p>Projection parameters to make the NetCDF file CF compliant. Defaults to USGS Albers Equal Area if nothing is supplied.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>NetCDF</strong><span class="classifier">file</span></dt><dd><p>A NetCDF file at <em>outFile</em>.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p><em>Metadata Dictionary</em></p>
<p>The metadata dictionary is expecting a particular set of keys to specify the metadata fields within the netCDF file being generated. These fields were chosen to make the resulting netCDF file compliant with the Climate and Forecast and the Data Discovery metadata conventions. Fields are described below, many descriptions are the same as <a class="reference external" href="http://cfconventions.org/Data/cf-conventions/cf-conventions-1.7/cf-conventions.html#description-of-file-contents">http://cfconventions.org/Data/cf-conventions/cf-conventions-1.7/cf-conventions.html#description-of-file-contents</a> or <a class="reference external" href="http://wiki.esipfed.org/index.php/Attribute_Convention_for_Data_Discovery_1-3">http://wiki.esipfed.org/index.php/Attribute_Convention_for_Data_Discovery_1-3</a>.</p>
<dl class="simple">
<dt>title</dt><dd><p>A succinct description of what is in the dataset.</p>
</dd>
<dt>institution</dt><dd><p>Specifies where the original data was produced.</p>
</dd>
<dt>source</dt><dd><p>The method of production of the original data. If it was model-generated, source should name the model and its version, as specifically as could be useful. If it is observational, source should characterize it (e.g., “surface observation” or “radiosonde”).</p>
</dd>
<dt>id </dt><dd><p>An identifier for the data set, provided by and unique within its naming authority. The combination of the “naming authority” and the “id” should be globally unique, but the id can be globally unique by itself also. IDs can be URLs, URNs, DOIs, meaningful text strings, a local key, or any other unique string of characters. The id should not include white space characters.</p>
</dd>
<dt>naming_authority</dt><dd><p>The organization that provides the initial id (see above) for the dataset. The naming authority should be uniquely specified by this attribute. We recommend using reverse-DNS naming for the naming authority; URIs are also acceptable. Example: ‘edu.ucar.unidata’.</p>
</dd>
<dt>references</dt><dd><p>Published or web-based references that describe the data or methods used to produce it.</p>
</dd>
<dt>comment</dt><dd><p>Miscellaneous information about the data or methods used to produce it.</p>
</dd>
<dt>history</dt><dd><p>Provides an audit trail for modifications to the original data. Well-behaved generic netCDF filters will automatically append their name and the parameters with which they were invoked to the global history attribute of an input netCDF file. We recommend that each line begin with a timestamp indicating the date and time of day that the program was executed.</p>
</dd>
<dt>license</dt><dd><p>Provide the URL to a standard or specific license, enter “Freely Distributed” or “None”, or describe any restrictions to data access and distribution in free text.</p>
</dd>
<dt>acknowledgement</dt><dd><p>A place to acknowledge various types of support for the project that produced this data.</p>
</dd>
<dt>metadata_link</dt><dd><p>A URL that gives the location of more complete metadata. A persistent URL is recommended for this attribute.</p>
</dd>
<dt>date_created</dt><dd><p>The date on which this version of the data was created. (Modification of values implies a new version, hence this would be assigned the date of the most recent values modification.) Metadata changes are not considered when assigning the date_created. The ISO 8601:2004 extended date format is recommended, as described in the Attribute Content Guidance section.</p>
</dd>
<dt>creator_type</dt><dd><p>Specifies type of creator with one of the following: ‘person’, ‘group’, ‘institution’, or ‘position’. If this attribute is not specified, the creator is assumed to be a person.</p>
</dd>
<dt>creator_email</dt><dd><p>The email address of the person (or other creator type specified by the creator_type attribute) principally responsible for creating this data.</p>
</dd>
<dt>creator_name</dt><dd><p>The name of the person (or other creator type specified by the creator_type attribute) principally responsible for creating this data.</p>
</dd>
<dt>creator_url</dt><dd><p>The URL of the person (or other creator type specified by the creator_type attribute) principally responsible for creating this data.</p>
</dd>
<dt>creator_institution</dt><dd><p>The institution of the creator; should uniquely identify the creator’s institution. This attribute’s value should be specified even if it matches the value of publisher_institution, or if creator_type is institution.</p>
</dd>
<dt>publisher_type</dt><dd><p>Specifies type of publisher with one of the following: ‘person’, ‘group’, ‘institution’, or ‘position’. If this attribute is not specified, the publisher is assumed to be a person.</p>
</dd>
<dt>publisher_name</dt><dd><p>The name of the person (or other entity specified by the publisher_type attribute) responsible for publishing the data file or product to users, with its current metadata and format.</p>
</dd>
<dt>publisher_email</dt><dd><p>The email address of the person (or other entity specified by the publisher_type attribute) responsible for publishing the data file or product to users, with its current metadata and format.</p>
</dd>
<dt>publisher_url</dt><dd><p>The URL of the person (or other entity specified by the publisher_type attribute) responsible for publishing the data file or product to users, with its current metadata and format.</p>
</dd>
<dt>publisher_institution</dt><dd><p>The institution that presented the data file or equivalent product to users; should uniquely identify the institution. If publisher_type is institution, this should have the same value as publisher_name.</p>
</dd>
<dt>var_name</dt><dd><p>Variable name given to the dataset. For example minimum temperature would be Tmin.</p>
</dd>
<dt>units</dt><dd><p>Unit value associated with quantity described by the dataset.</p>
</dd>
<dt>add_offset</dt><dd><p>Offset value use with the data, usually 0.0 if no offset is used with the data.</p>
</dd>
<dt>standard_name</dt><dd><p>Short name associated with the dataset.</p>
</dd>
<dt>long_name</dt><dd><p>More descriptive name associated with the dataset.</p>
</dd>
<dt>grid_mapping</dt><dd><p>The way data values are mapped to a grid, usually ‘crs’.</p>
</dd>
<dt>scale_factor</dt><dd><p>Numeric value the data are scaled by to save space, usually 1.0 if data are not scaled.</p>
</dd>
<dt>coverage_content_type</dt><dd><p>An ISO 19115-1 code to indicate the source of the data (image, thematicClassification, physicalMeasurement, auxiliaryInformation, qualityInformation, referenceInformation, modelResult, or coordinate).</p>
</dd>
</dl>
<p><em>Profile</em></p>
<p>The projection parameters needed and values for USGS Albers Equal Area (AEA) are supplied below.</p>
<dl class="simple">
<dt>grid_mapping_name (‘albers_conical_equal_area’)</dt><dd><p>The name of the projection to use as a string.</p>
</dd>
<dt>standard_parallel ([45.5, 29.5])</dt><dd><p>Parallels for the projection as a list of floats. May differ for non-AEA projections; however, this work should be done with equal-area projections.</p>
</dd>
<dt>latitude_of_projection_origin (23.0)</dt><dd><p>Origin latitude as a float.</p>
</dd>
<dt>longitude_of_central_meridian (-96.0)</dt><dd><p>Central Meridian as a float.</p>
</dd>
<dt>false_easting (0)</dt><dd><p>Flase easting parameter as a float.</p>
</dd>
<dt>false_northing (0)</dt><dd><p>False northing parameter as a float.</p>
</dd>
<dt>semi_major_axis (6378137.0)</dt><dd><p>Ellipse parameter as a float.</p>
</dd>
<dt>inverse_flattening (298.257222101)</dt><dd><p>Ellipse parameter as a float.</p>
</dd>
<dt>unit (‘m’)</dt><dd><p>Map units to use for the projection as a string.</p>
</dd>
<dt>wkt</dt><dd><p>Well known text (WKT) representation of the above projection parameters, e.g. ‘PROJCS[“USA_Contiguous_Albers_Equal_Area_Conic_USGS_version”, GEOGCS[“GCS_North_American_1983”, DATUM[“D_North_American_1983”, SPHEROID[“GRS_1980”,6378137.0,298.257222101]], PRIMEM[“Greenwich”,0.0], UNIT[“Degree”,0.0174532925199433]], PROJECTION[“Albers”], PARAMETER[“False_Easting”,0.0], PARAMETER[“False_Northing”,0.0], PARAMETER[“Central_Meridian”,-96.0], PARAMETER[“Standard_Parallel_1”,29.5], PARAMETER[“Standard_Parallel_2”,45.5], PARAMETER[“Latitude_Of_Origin”,23.0], UNIT[“Meter”,1]]’</p>
</dd>
</dl>
</dd></dl>

</div>
<span id="document-z_references"></span><div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p id="bibtex-bibliography-z_references-0"><dl class="citation">
<dt class="bibtex label" id="taudem"><span class="brackets">1</span></dt>
<dd><p>David Tarboton. TauDEM Version 5.3.8. <span><a class="reference external" href="#"></a></span>https://github.com/dtarb/TauDEM/tree/v5.3.8, 2016. Accessed: 2020-05-19.</p>
</dd>
</dl>
</p>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Theodore Barnhart, Roy Sando, Seth Siefken, Peter McCarthy, and Al Rea

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>